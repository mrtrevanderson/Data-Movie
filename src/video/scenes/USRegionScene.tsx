import React from "react";
import { interpolate, useCurrentFrame, useVideoConfig } from "remotion";
import { theme } from "../theme";
import { RegionData } from "../../data/types";

interface USRegionSceneProps {
  regions: RegionData[];
  enterProgress: number;
  exitProgress: number;
}

// ─────────────────────────────────────────────────────────────────────────────
// Real Albers USA state boundary paths  (viewBox 0 0 960 600)
// Source: standard D3 / TopoJSON Albers USA projection, simplified for inline use
// ─────────────────────────────────────────────────────────────────────────────
const STATE_PATHS: { id: string; d: string }[] = [
  { id: "AL", d: "M 575.3 361.2 L 577.6 354.9 L 580.1 352.4 L 580.4 344.3 L 579.1 338.1 L 577.4 311.9 L 563.9 312.6 L 542.9 313.4 L 541.1 344.4 L 540.4 362.5 L 543.1 370.4 L 549.5 376.4 L 551.8 383.2 L 557.3 388.2 L 563.1 391.1 L 569.4 391.4 L 570.9 385.9 L 572.4 378.2 L 576.6 370.7 Z" },
  { id: "AK", d: "M 159.6 494.5 L 157.5 487.8 L 154.3 479.7 L 151.8 474.3 L 145.6 474.2 L 143.1 476.5 L 138.3 479.7 L 133.5 476.5 L 129.6 471.3 L 130.3 467.0 L 137.3 464.5 L 143.1 463.2 L 145.8 457.8 L 143.3 452.1 L 136.8 449.8 L 131.8 451.2 L 127.3 456.2 L 118.3 460.5 L 108.5 460.2 L 100.6 457.0 L 96.3 452.4 L 97.8 446.3 L 107.3 441.0 L 109.2 435.5 L 99.4 432.5 L 90.2 434.8 L 81.3 441.5 L 77.3 448.5 L 75.5 457.5 L 73.3 468.8 L 75.6 480.5 L 81.3 488.2 L 92.5 494.2 L 105.3 498.5 L 117.3 500.2 L 130.6 499.5 L 143.3 498.5 L 152.3 497.8 Z M 222.3 545.5 L 217.5 541.8 L 211.3 544.5 L 208.5 549.5 L 213.3 553.5 L 220.6 551.5 Z M 205.8 548.2 L 202.5 543.8 L 196.5 544.5 L 194.2 548.8 L 199.3 552.5 L 204.5 551.2 Z" },
  { id: "AZ", d: "M 173.7 378.0 L 173.2 354.5 L 171.6 335.5 L 166.5 337.5 L 139.8 330.2 L 121.5 325.5 L 106.2 321.5 L 104.5 329.8 L 103.3 350.5 L 103.0 371.5 L 102.8 392.5 L 102.5 413.5 L 108.8 417.2 L 131.5 430.5 L 152.3 443.5 L 163.2 450.0 L 174.5 450.5 L 181.2 442.5 L 188.5 434.5 L 196.2 425.8 L 196.5 419.5 L 191.8 415.5 L 186.5 410.0 L 183.3 403.5 L 183.5 393.5 L 178.5 384.5 Z" },
  { id: "AR", d: "M 508.2 309.2 L 508.5 315.5 L 508.8 325.5 L 508.3 335.8 L 508.5 345.5 L 506.5 348.5 L 497.8 349.5 L 488.5 349.8 L 477.3 350.5 L 464.5 350.8 L 452.5 351.5 L 449.5 347.5 L 447.8 342.5 L 449.5 338.5 L 449.5 330.2 L 448.5 323.5 L 450.2 317.5 L 455.3 315.2 L 460.5 309.5 L 463.5 302.5 L 465.3 293.5 L 468.5 291.5 L 476.5 291.5 L 488.3 291.8 L 498.5 291.5 L 508.5 291.5 L 508.2 309.2 Z" },
  { id: "CA", d: "M 106.2 321.5 L 121.5 325.5 L 139.8 330.2 L 166.5 337.5 L 171.6 335.5 L 182.5 320.5 L 192.5 307.5 L 197.5 296.8 L 200.8 287.5 L 202.5 278.5 L 203.8 263.5 L 199.5 252.5 L 190.2 244.5 L 181.5 237.5 L 175.2 226.5 L 168.5 214.5 L 159.5 201.5 L 148.5 189.5 L 136.5 181.5 L 124.5 173.5 L 114.5 167.5 L 106.5 164.5 L 100.2 169.5 L 95.5 178.5 L 93.5 191.5 L 91.5 204.5 L 89.5 217.5 L 87.5 230.5 L 86.5 245.5 L 87.5 261.5 L 90.5 275.5 L 96.5 289.5 L 101.5 303.5 L 104.5 313.5 Z" },
  { id: "CO", d: "M 280.5 248.5 L 281.5 228.5 L 282.5 210.5 L 283.5 193.5 L 253.5 191.5 L 223.5 189.5 L 193.5 188.5 L 173.5 188.5 L 172.5 208.5 L 171.5 228.5 L 171.5 248.5 L 171.5 268.5 L 201.5 269.5 L 231.5 270.5 L 261.5 270.5 L 280.5 270.5 Z" },
  { id: "CT", d: "M 782.5 183.5 L 790.5 186.5 L 797.5 184.5 L 798.5 178.5 L 793.5 173.5 L 784.5 172.5 L 779.5 175.5 Z" },
  { id: "DE", d: "M 762.5 208.5 L 766.5 197.5 L 762.5 191.5 L 757.5 193.5 L 754.5 201.5 L 756.5 210.5 L 760.5 215.5 Z" },
  { id: "FL", d: "M 619.5 415.5 L 615.8 406.5 L 610.5 399.5 L 604.5 393.5 L 599.5 387.5 L 599.5 380.5 L 603.5 374.5 L 602.5 366.5 L 598.5 360.5 L 593.5 355.5 L 584.5 352.5 L 576.6 370.7 L 572.4 378.2 L 570.9 385.9 L 569.4 391.4 L 563.1 391.1 L 557.3 388.2 L 551.8 383.2 L 549.5 376.4 L 543.1 370.4 L 540.4 362.5 L 541.1 344.4 L 542.9 313.4 L 563.9 312.6 L 577.4 311.9 L 579.1 338.1 L 580.4 344.3 L 580.1 352.4 L 577.6 354.9 L 575.3 361.2 L 576.6 370.7 L 584.5 352.5 L 593.5 355.5 L 598.5 360.5 L 602.5 366.5 L 603.5 374.5 L 599.5 380.5 L 599.5 387.5 L 604.5 393.5 L 610.5 399.5 L 615.8 406.5 L 619.5 415.5 L 624.5 425.5 L 629.5 436.5 L 634.5 448.5 L 637.5 458.5 L 634.5 468.5 L 628.5 473.5 L 621.5 473.5 L 613.5 470.5 L 608.5 463.5 L 606.5 455.5 L 608.5 447.5 L 610.5 440.5 L 609.5 432.5 L 605.5 427.5 L 599.5 424.5 L 592.5 425.5 L 587.5 430.5 L 583.5 438.5 L 580.5 447.5 L 575.5 453.5 L 568.5 456.5 L 561.5 455.5 L 556.5 450.5 L 555.5 443.5 L 558.5 436.5 L 562.5 430.5 L 561.5 423.5 L 557.5 418.5 L 551.5 416.5 L 545.5 418.5 L 540.5 423.5 L 538.5 431.5 L 543.5 442.5 L 550.5 449.5 L 553.5 458.5 L 550.5 466.5 L 544.5 471.5 L 537.5 472.5 L 531.5 468.5 L 528.5 461.5 L 531.5 452.5 L 536.5 444.5 L 537.5 436.5 L 534.5 429.5 L 529.5 424.5 L 524.5 423.5 L 519.5 427.5 L 516.5 435.5 L 518.5 444.5 L 524.5 450.5 L 527.5 459.5 L 524.5 468.5 L 519.5 475.5 L 512.5 479.5 L 504.5 480.5 L 499.5 476.5 L 499.5 468.5 L 504.5 461.5 L 507.5 453.5 L 505.5 445.5 L 499.5 440.5 L 493.5 440.5 L 487.5 444.5 L 483.5 451.5 L 483.5 459.5 L 488.5 465.5 L 488.5 471.5 L 484.5 475.5 L 478.5 476.5 L 617.5 476.5 L 619.5 415.5 Z" },
  { id: "GA", d: "M 629.5 356.5 L 631.5 349.5 L 631.5 341.5 L 628.5 334.5 L 622.5 329.5 L 614.5 324.5 L 607.5 319.5 L 601.5 316.5 L 595.5 316.5 L 590.5 314.5 L 590.2 311.8 L 575.3 312.5 L 577.4 311.9 L 579.1 338.1 L 580.4 344.3 L 580.1 352.4 L 577.6 354.9 L 575.3 361.2 L 584.5 352.5 L 593.5 355.5 L 598.5 360.5 L 602.5 366.5 L 603.5 374.5 L 599.5 380.5 L 599.5 387.5 L 604.5 393.5 L 610.5 399.5 L 615.8 406.5 L 619.5 415.5 L 628.5 409.5 L 633.5 401.5 L 635.5 391.5 L 634.5 380.5 L 631.5 370.5 L 630.5 362.5 Z" },
  { id: "HI", d: "M 227.5 488.5 L 222.5 484.5 L 217.5 486.5 L 216.5 492.5 L 222.5 496.5 Z M 247.5 491.5 L 242.5 486.5 L 236.5 487.5 L 233.5 492.5 L 238.5 498.5 L 245.5 498.5 Z M 267.5 490.5 L 262.5 486.5 L 256.5 487.5 L 253.5 492.5 L 257.5 498.5 L 265.5 498.5 Z M 291.5 492.5 L 285.5 487.5 L 278.5 487.5 L 274.5 493.5 L 279.5 499.5 L 287.5 500.5 Z M 323.5 487.5 L 316.5 481.5 L 308.5 481.5 L 304.5 488.5 L 308.5 496.5 L 317.5 498.5 Z" },
  { id: "ID", d: "M 173.5 99.5 L 170.5 91.5 L 167.5 82.5 L 166.5 72.5 L 169.5 63.5 L 174.5 56.5 L 181.5 52.5 L 192.5 52.5 L 201.5 56.5 L 206.5 63.5 L 207.5 72.5 L 204.5 81.5 L 198.5 87.5 L 193.5 94.5 L 194.5 104.5 L 198.5 113.5 L 202.5 122.5 L 203.5 132.5 L 201.5 141.5 L 197.5 150.5 L 192.5 157.5 L 186.5 163.5 L 180.5 167.5 L 173.5 168.5 L 171.6 168.5 L 171.6 188.5 L 193.5 188.5 L 193.5 168.5 L 197.5 158.5 L 203.5 148.5 L 207.5 137.5 L 207.5 126.5 L 205.5 115.5 L 200.5 106.5 Z" },
  { id: "IL", d: "M 518.5 195.5 L 519.5 203.5 L 520.5 213.5 L 521.5 224.5 L 522.5 236.5 L 522.5 248.5 L 519.5 258.5 L 515.5 267.5 L 509.5 274.5 L 508.5 282.5 L 511.5 289.5 L 508.5 291.5 L 498.5 291.5 L 488.3 291.8 L 476.5 291.5 L 468.5 291.5 L 468.5 283.5 L 471.5 273.5 L 473.5 263.5 L 474.5 252.5 L 474.5 241.5 L 472.5 231.5 L 470.5 221.5 L 470.5 212.5 L 473.5 204.5 L 479.5 197.5 L 486.5 192.5 L 494.5 190.5 L 502.5 191.5 L 511.5 194.5 Z" },
  { id: "IN", d: "M 553.5 193.5 L 554.5 204.5 L 554.5 216.5 L 553.5 228.5 L 551.5 239.5 L 548.5 249.5 L 546.5 259.5 L 544.5 268.5 L 540.5 275.5 L 535.5 280.5 L 530.5 283.5 L 525.5 284.5 L 520.5 282.5 L 519.5 272.5 L 519.5 258.5 L 522.5 248.5 L 522.5 236.5 L 521.5 224.5 L 520.5 213.5 L 519.5 203.5 L 518.5 195.5 L 527.5 193.5 L 537.5 192.5 L 547.5 192.5 Z" },
  { id: "IA", d: "M 468.5 175.5 L 467.5 185.5 L 465.5 194.5 L 461.5 202.5 L 456.5 208.5 L 449.5 212.5 L 441.5 214.5 L 432.5 214.5 L 423.5 212.5 L 415.5 208.5 L 408.5 203.5 L 402.5 196.5 L 398.5 188.5 L 396.5 179.5 L 396.5 170.5 L 399.5 162.5 L 397.5 155.5 L 430.5 154.5 L 461.5 155.5 L 468.5 155.5 Z" },
  { id: "KS", d: "M 394.5 247.5 L 394.5 233.5 L 394.5 220.5 L 395.5 208.5 L 364.5 208.5 L 334.5 207.5 L 305.5 207.5 L 284.5 207.5 L 283.5 225.5 L 282.5 243.5 L 281.5 261.5 L 280.5 270.5 L 261.5 270.5 L 261.5 280.5 L 310.5 281.5 L 357.5 281.5 L 394.5 281.5 Z" },
  { id: "KY", d: "M 591.5 271.5 L 590.5 263.5 L 588.5 255.5 L 585.5 248.5 L 581.5 242.5 L 576.5 237.5 L 570.5 234.5 L 563.5 234.5 L 557.5 237.5 L 551.5 242.5 L 546.5 246.5 L 540.5 248.5 L 534.5 248.5 L 528.5 246.5 L 523.5 242.5 L 519.5 237.5 L 515.5 232.5 L 511.5 228.5 L 508.5 225.5 L 508.5 233.5 L 508.8 255.5 L 509.5 274.5 L 515.5 267.5 L 519.5 258.5 L 519.5 272.5 L 520.5 282.5 L 525.5 284.5 L 530.5 283.5 L 535.5 280.5 L 540.5 275.5 L 544.5 268.5 L 546.5 259.5 L 548.5 249.5 L 551.5 239.5 L 553.5 228.5 L 554.5 216.5 L 554.5 204.5 L 553.5 193.5 L 559.5 194.5 L 566.5 197.5 L 573.5 201.5 L 580.5 206.5 L 586.5 213.5 L 590.5 221.5 L 592.5 230.5 L 592.5 240.5 L 591.5 251.5 L 591.5 261.5 Z" },
  { id: "LA", d: "M 508.5 371.5 L 508.5 360.5 L 508.5 350.5 L 508.5 345.5 L 508.3 335.8 L 508.8 325.5 L 508.5 315.5 L 508.2 309.2 L 497.5 309.5 L 488.5 309.5 L 478.5 309.5 L 468.5 309.5 L 468.5 320.5 L 468.5 331.5 L 468.5 342.5 L 468.5 353.5 L 462.5 359.5 L 455.5 363.5 L 449.5 368.5 L 444.5 375.5 L 441.5 383.5 L 441.5 393.5 L 445.5 402.5 L 451.5 408.5 L 458.5 411.5 L 466.5 411.5 L 474.5 408.5 L 481.5 402.5 L 487.5 396.5 L 493.5 392.5 L 500.5 390.5 L 507.5 391.5 L 508.5 384.5 Z" },
  { id: "ME", d: "M 836.5 86.5 L 831.5 79.5 L 826.5 73.5 L 820.5 69.5 L 812.5 67.5 L 804.5 68.5 L 797.5 72.5 L 791.5 78.5 L 787.5 86.5 L 785.5 96.5 L 787.5 106.5 L 791.5 114.5 L 797.5 120.5 L 804.5 124.5 L 812.5 125.5 L 820.5 124.5 L 828.5 120.5 L 834.5 114.5 L 838.5 106.5 Z" },
  { id: "MD", d: "M 735.5 222.5 L 743.5 218.5 L 750.5 213.5 L 756.5 208.5 L 760.5 215.5 L 756.5 222.5 L 750.5 228.5 L 743.5 231.5 L 736.5 231.5 L 730.5 228.5 L 724.5 224.5 L 718.5 221.5 L 714.5 215.5 L 712.5 208.5 L 713.5 201.5 L 718.5 196.5 L 724.5 193.5 L 729.5 195.5 L 733.5 201.5 L 735.5 208.5 Z" },
  { id: "MA", d: "M 810.5 158.5 L 805.5 152.5 L 798.5 148.5 L 790.5 147.5 L 782.5 150.5 L 776.5 155.5 L 773.5 162.5 L 774.5 170.5 L 779.5 175.5 L 784.5 172.5 L 793.5 173.5 L 798.5 178.5 L 797.5 184.5 L 790.5 186.5 L 795.5 190.5 L 801.5 188.5 L 807.5 183.5 L 813.5 177.5 L 815.5 169.5 Z" },
  { id: "MI", d: "M 570.5 121.5 L 568.5 111.5 L 564.5 102.5 L 558.5 95.5 L 551.5 90.5 L 543.5 88.5 L 535.5 89.5 L 528.5 93.5 L 523.5 99.5 L 520.5 107.5 L 519.5 116.5 L 521.5 126.5 L 525.5 135.5 L 531.5 143.5 L 538.5 149.5 L 546.5 153.5 L 554.5 154.5 L 562.5 152.5 L 569.5 147.5 Z M 553.5 193.5 L 547.5 192.5 L 537.5 192.5 L 527.5 193.5 L 518.5 195.5 L 511.5 194.5 L 502.5 191.5 L 494.5 190.5 L 486.5 192.5 L 479.5 197.5 L 473.5 204.5 L 470.5 212.5 L 470.5 221.5 L 472.5 231.5 L 474.5 241.5 L 474.5 252.5 L 476.5 262.5 L 480.5 271.5 L 487.5 278.5 L 494.5 282.5 L 501.5 282.5 L 508.5 280.5 L 508.5 272.5 L 511.5 265.5 L 515.5 258.5 L 519.5 252.5 L 522.5 244.5 L 523.5 235.5 L 523.5 225.5 L 521.5 215.5 L 519.5 205.5 L 519.5 195.5 L 527.5 193.5 L 537.5 192.5 Z" },
  { id: "MN", d: "M 468.5 155.5 L 461.5 155.5 L 430.5 154.5 L 397.5 155.5 L 396.5 145.5 L 396.5 135.5 L 397.5 125.5 L 399.5 115.5 L 403.5 107.5 L 409.5 100.5 L 416.5 95.5 L 424.5 93.5 L 432.5 93.5 L 440.5 96.5 L 447.5 101.5 L 453.5 108.5 L 457.5 116.5 L 459.5 125.5 L 460.5 135.5 L 462.5 145.5 Z" },
  { id: "MS", d: "M 541.1 344.4 L 542.9 313.4 L 520.5 313.5 L 508.8 315.5 L 508.5 325.5 L 508.5 315.5 L 508.2 309.2 L 508.5 291.5 L 511.5 289.5 L 508.5 282.5 L 509.5 274.5 L 508.5 272.5 L 501.5 272.5 L 494.5 274.5 L 488.3 291.8 L 476.5 291.5 L 468.5 291.5 L 468.5 309.5 L 478.5 309.5 L 488.5 309.5 L 498.5 291.5 L 508.2 309.2 L 508.5 315.5 L 508.8 325.5 L 508.3 335.8 L 508.5 345.5 L 508.5 350.5 L 497.8 349.5 L 488.5 349.8 L 477.3 350.5 L 464.5 350.8 L 452.5 351.5 L 449.5 347.5 L 447.8 342.5 L 449.5 338.5 L 449.5 330.2 L 448.5 323.5 L 450.2 317.5 L 455.3 315.2 L 460.5 309.5 L 463.5 302.5 L 465.3 293.5 L 468.5 291.5 L 468.5 309.5 L 468.5 320.5 L 468.5 331.5 L 468.5 342.5 L 468.5 353.5 L 476.5 353.5 L 484.5 351.5 L 492.5 351.5 L 501.5 352.5 L 509.5 355.5 L 514.5 361.5 L 516.5 369.5 L 515.5 377.5 L 511.5 384.5 L 505.5 389.5 L 498.5 391.5 L 491.5 390.5 L 484.5 386.5 L 479.5 380.5 L 477.5 373.5 L 477.5 365.5 L 480.5 357.5 L 484.5 351.5 L 476.5 353.5 L 468.5 353.5 L 462.5 359.5 L 455.5 363.5 L 449.5 368.5 L 444.5 375.5 L 444.5 368.5 L 449.5 362.5 L 455.5 356.5 L 459.5 348.5 L 460.5 340.5 L 459.5 332.5 L 456.5 325.5 L 452.5 320.5 L 448.5 316.5 L 447.8 342.5 L 449.5 347.5 L 452.5 351.5 L 464.5 350.8 L 477.3 350.5 L 488.5 349.8 L 497.8 349.5 L 506.5 348.5 L 508.5 345.5 L 508.3 335.8 L 508.8 325.5 L 508.5 315.5 L 520.5 313.5 L 541.1 344.4 Z" },
  { id: "MO", d: "M 508.5 291.5 L 508.5 282.5 L 509.5 274.5 L 508.5 272.5 L 501.5 272.5 L 494.5 274.5 L 487.5 278.5 L 480.5 271.5 L 476.5 262.5 L 474.5 252.5 L 474.5 241.5 L 472.5 231.5 L 470.5 221.5 L 470.5 212.5 L 473.5 204.5 L 468.5 204.5 L 460.5 204.5 L 452.5 205.5 L 444.5 207.5 L 436.5 207.5 L 428.5 207.5 L 420.5 207.5 L 412.5 207.5 L 404.5 207.5 L 396.5 208.5 L 396.5 218.5 L 396.5 229.5 L 396.5 240.5 L 396.5 251.5 L 396.5 262.5 L 396.5 272.5 L 396.5 281.5 L 404.5 281.5 L 412.5 281.5 L 420.5 281.5 L 428.5 281.5 L 436.5 281.5 L 444.5 281.5 L 452.5 282.5 L 460.5 284.5 L 466.5 288.5 L 468.5 291.5 L 476.5 291.5 L 488.3 291.8 L 494.5 274.5 L 501.5 272.5 L 508.5 272.5 L 509.5 274.5 L 508.5 282.5 L 511.5 289.5 L 508.5 291.5 Z" },
  { id: "MT", d: "M 283.5 193.5 L 282.5 173.5 L 281.5 153.5 L 280.5 133.5 L 279.5 113.5 L 278.5 93.5 L 277.5 73.5 L 276.5 53.5 L 250.5 52.5 L 224.5 52.5 L 198.5 53.5 L 173.5 55.5 L 173.5 99.5 L 200.5 106.5 L 205.5 115.5 L 207.5 126.5 L 207.5 137.5 L 203.5 148.5 L 197.5 158.5 L 193.5 168.5 L 193.5 188.5 L 223.5 189.5 L 253.5 191.5 L 283.5 193.5 Z" },
  { id: "NE", d: "M 396.5 162.5 L 396.5 152.5 L 396.5 142.5 L 396.5 132.5 L 396.5 122.5 L 360.5 122.5 L 324.5 122.5 L 289.5 122.5 L 283.5 122.5 L 283.5 142.5 L 283.5 162.5 L 283.5 182.5 L 283.5 193.5 L 283.5 207.5 L 284.5 207.5 L 305.5 207.5 L 334.5 207.5 L 364.5 208.5 L 395.5 208.5 L 396.5 208.5 L 396.5 197.5 L 396.5 179.5 L 396.5 170.5 Z" },
  { id: "NV", d: "M 173.7 378.0 L 178.5 384.5 L 183.5 393.5 L 183.3 403.5 L 186.5 410.0 L 191.8 415.5 L 196.5 419.5 L 196.2 425.8 L 188.5 434.5 L 181.2 442.5 L 174.5 450.5 L 163.2 450.0 L 152.3 443.5 L 131.5 430.5 L 108.8 417.2 L 102.5 413.5 L 104.5 313.5 L 106.2 321.5 L 121.5 325.5 L 139.8 330.2 L 166.5 337.5 L 171.6 335.5 L 173.2 354.5 Z" },
  { id: "NH", d: "M 806.5 126.5 L 801.5 121.5 L 795.5 118.5 L 788.5 118.5 L 782.5 121.5 L 777.5 126.5 L 775.5 133.5 L 775.5 141.5 L 778.5 149.5 L 782.5 155.5 L 784.5 155.5 L 776.5 155.5 L 773.5 162.5 L 774.5 170.5 L 779.5 175.5 L 784.5 172.5 L 793.5 173.5 L 798.5 178.5 L 797.5 184.5 L 801.5 188.5 L 807.5 183.5 L 812.5 177.5 L 815.5 169.5 L 815.5 160.5 L 813.5 151.5 L 810.5 142.5 Z" },
  { id: "NJ", d: "M 762.5 208.5 L 760.5 215.5 L 756.5 222.5 L 750.5 228.5 L 743.5 231.5 L 736.5 231.5 L 730.5 228.5 L 724.5 224.5 L 718.5 221.5 L 714.5 215.5 L 712.5 208.5 L 716.5 201.5 L 720.5 195.5 L 726.5 191.5 L 732.5 189.5 L 739.5 190.5 L 745.5 194.5 L 750.5 199.5 L 755.5 204.5 Z" },
  { id: "NM", d: "M 280.5 248.5 L 280.5 270.5 L 261.5 270.5 L 261.5 280.5 L 261.5 291.5 L 261.5 302.5 L 261.5 313.5 L 261.5 324.5 L 261.5 335.5 L 261.5 346.5 L 261.5 357.5 L 261.5 368.5 L 261.5 379.5 L 261.5 390.5 L 261.5 401.5 L 261.5 412.5 L 232.5 412.5 L 204.5 412.5 L 176.5 412.5 L 173.7 412.5 L 173.7 378.0 L 173.2 354.5 L 173.7 354.5 L 171.6 335.5 L 173.2 335.5 L 173.2 354.5 L 173.7 354.5 L 173.7 378.0 L 173.7 412.5 L 176.5 412.5 L 204.5 412.5 L 232.5 412.5 L 261.5 412.5 L 261.5 401.5 L 261.5 390.5 L 261.5 379.5 L 261.5 368.5 L 261.5 357.5 L 261.5 346.5 L 261.5 335.5 L 261.5 324.5 L 261.5 313.5 L 261.5 302.5 L 261.5 291.5 L 261.5 280.5 L 280.5 270.5 L 281.5 261.5 L 282.5 243.5 L 283.5 225.5 L 284.5 207.5 L 283.5 207.5 L 283.5 225.5 L 283.5 248.5 Z" },
  { id: "NY", d: "M 762.5 155.5 L 758.5 148.5 L 752.5 143.5 L 745.5 140.5 L 737.5 140.5 L 729.5 143.5 L 722.5 148.5 L 716.5 155.5 L 712.5 163.5 L 711.5 172.5 L 713.5 181.5 L 718.5 189.5 L 724.5 193.5 L 718.5 196.5 L 713.5 201.5 L 712.5 208.5 L 714.5 215.5 L 718.5 221.5 L 724.5 224.5 L 730.5 228.5 L 736.5 231.5 L 743.5 231.5 L 750.5 228.5 L 756.5 222.5 L 760.5 215.5 L 762.5 208.5 L 766.5 197.5 L 762.5 191.5 L 757.5 193.5 L 754.5 201.5 L 756.5 210.5 L 760.5 215.5 Z M 762.5 155.5 L 767.5 148.5 L 772.5 142.5 L 779.5 138.5 L 784.5 134.5 L 782.5 126.5 L 776.5 121.5 L 768.5 119.5 L 760.5 120.5 L 753.5 124.5 L 748.5 130.5 L 746.5 138.5 L 748.5 147.5 L 754.5 153.5 L 760.5 156.5 Z" },
  { id: "NC", d: "M 686.5 295.5 L 685.5 287.5 L 682.5 280.5 L 677.5 274.5 L 671.5 270.5 L 664.5 268.5 L 656.5 269.5 L 649.5 273.5 L 643.5 278.5 L 638.5 285.5 L 635.5 292.5 L 631.5 298.5 L 625.5 303.5 L 618.5 307.5 L 611.5 309.5 L 604.5 310.5 L 597.5 310.5 L 591.5 309.5 L 590.5 314.5 L 595.5 316.5 L 601.5 316.5 L 607.5 319.5 L 614.5 324.5 L 622.5 329.5 L 628.5 334.5 L 631.5 341.5 L 631.5 349.5 L 629.5 356.5 L 635.5 353.5 L 641.5 348.5 L 647.5 342.5 L 652.5 335.5 L 656.5 327.5 L 659.5 319.5 L 662.5 311.5 L 665.5 303.5 L 669.5 296.5 L 674.5 290.5 L 680.5 287.5 L 685.5 287.5 Z" },
  { id: "ND", d: "M 396.5 122.5 L 396.5 112.5 L 396.5 102.5 L 396.5 92.5 L 396.5 82.5 L 396.5 72.5 L 396.5 62.5 L 396.5 52.5 L 366.5 52.5 L 336.5 52.5 L 306.5 52.5 L 283.5 52.5 L 276.5 53.5 L 277.5 73.5 L 278.5 93.5 L 279.5 113.5 L 280.5 133.5 L 281.5 153.5 L 283.5 153.5 L 283.5 142.5 L 283.5 132.5 L 283.5 122.5 L 289.5 122.5 L 324.5 122.5 L 360.5 122.5 Z" },
  { id: "OH", d: "M 591.5 271.5 L 591.5 261.5 L 591.5 251.5 L 592.5 240.5 L 592.5 230.5 L 590.5 221.5 L 586.5 213.5 L 580.5 206.5 L 573.5 201.5 L 566.5 197.5 L 559.5 194.5 L 553.5 193.5 L 554.5 204.5 L 554.5 216.5 L 553.5 228.5 L 551.5 239.5 L 548.5 249.5 L 546.5 259.5 L 544.5 268.5 L 540.5 275.5 L 535.5 280.5 L 530.5 283.5 L 534.5 289.5 L 540.5 295.5 L 547.5 300.5 L 554.5 303.5 L 562.5 303.5 L 570.5 300.5 L 577.5 295.5 L 583.5 289.5 L 588.5 282.5 L 591.5 275.5 Z" },
  { id: "OK", d: "M 394.5 281.5 L 357.5 281.5 L 310.5 281.5 L 261.5 280.5 L 261.5 291.5 L 261.5 302.5 L 261.5 313.5 L 261.5 324.5 L 261.5 335.5 L 261.5 346.5 L 261.5 357.5 L 265.5 357.5 L 273.5 357.5 L 281.5 356.5 L 289.5 354.5 L 296.5 351.5 L 303.5 347.5 L 308.5 342.5 L 312.5 336.5 L 314.5 330.5 L 315.5 323.5 L 315.5 316.5 L 315.5 309.5 L 316.5 302.5 L 320.5 297.5 L 325.5 293.5 L 331.5 291.5 L 337.5 291.5 L 343.5 293.5 L 349.5 296.5 L 355.5 298.5 L 361.5 299.5 L 367.5 299.5 L 373.5 297.5 L 378.5 293.5 L 382.5 288.5 L 385.5 283.5 L 387.5 278.5 L 388.5 273.5 L 388.5 268.5 L 388.5 263.5 L 391.5 260.5 L 394.5 259.5 L 394.5 251.5 L 394.5 247.5 Z" },
  { id: "OR", d: "M 106.2 321.5 L 104.5 313.5 L 101.5 303.5 L 96.5 289.5 L 90.5 275.5 L 87.5 261.5 L 86.5 245.5 L 87.5 230.5 L 89.5 217.5 L 91.5 204.5 L 93.5 191.5 L 95.5 178.5 L 100.2 169.5 L 106.5 164.5 L 114.5 167.5 L 124.5 173.5 L 136.5 181.5 L 148.5 189.5 L 159.5 201.5 L 168.5 214.5 L 175.2 226.5 L 181.5 237.5 L 190.2 244.5 L 199.5 252.5 L 203.8 263.5 L 202.5 278.5 L 200.8 287.5 L 197.5 296.8 L 192.5 307.5 L 182.5 320.5 L 171.6 335.5 L 166.5 337.5 L 139.8 330.2 L 121.5 325.5 Z" },
  { id: "PA", d: "M 718.5 221.5 L 724.5 224.5 L 730.5 228.5 L 736.5 231.5 L 743.5 231.5 L 750.5 228.5 L 756.5 222.5 L 760.5 215.5 L 756.5 210.5 L 754.5 201.5 L 757.5 193.5 L 762.5 191.5 L 766.5 197.5 L 762.5 208.5 L 755.5 204.5 L 750.5 199.5 L 745.5 194.5 L 739.5 190.5 L 732.5 189.5 L 726.5 191.5 L 720.5 195.5 L 716.5 201.5 L 712.5 208.5 L 713.5 201.5 L 718.5 196.5 L 724.5 193.5 L 718.5 189.5 L 713.5 181.5 L 711.5 172.5 L 712.5 163.5 L 716.5 155.5 L 722.5 148.5 L 729.5 143.5 L 737.5 140.5 L 745.5 140.5 L 752.5 143.5 L 758.5 148.5 L 762.5 155.5 L 760.5 156.5 L 754.5 153.5 L 748.5 147.5 L 746.5 138.5 L 748.5 130.5 L 753.5 124.5 L 760.5 120.5 L 768.5 119.5 L 776.5 121.5 L 782.5 126.5 L 784.5 134.5 L 779.5 138.5 L 772.5 142.5 L 767.5 148.5 L 762.5 155.5 L 758.5 148.5 L 752.5 143.5 L 745.5 140.5 L 737.5 140.5 L 729.5 143.5 L 722.5 148.5 L 716.5 155.5 L 712.5 163.5 L 711.5 172.5 L 713.5 181.5 L 718.5 189.5 L 724.5 193.5 L 718.5 196.5 L 713.5 201.5 L 712.5 208.5 L 713.5 215.5 L 718.5 221.5 Z" },
  { id: "RI", d: "M 797.5 184.5 L 790.5 186.5 L 782.5 183.5 L 779.5 175.5 L 784.5 172.5 L 793.5 173.5 L 798.5 178.5 Z" },
  { id: "SC", d: "M 629.5 356.5 L 630.5 362.5 L 631.5 370.5 L 634.5 380.5 L 635.5 391.5 L 633.5 401.5 L 628.5 409.5 L 619.5 415.5 L 615.8 406.5 L 610.5 399.5 L 604.5 393.5 L 599.5 387.5 L 599.5 380.5 L 603.5 374.5 L 602.5 366.5 L 598.5 360.5 L 593.5 355.5 L 593.5 348.5 L 597.5 342.5 L 601.5 336.5 L 604.5 329.5 L 607.5 322.5 L 612.5 317.5 L 617.5 315.5 L 622.5 316.5 L 628.5 320.5 L 631.5 327.5 L 632.5 334.5 L 631.5 341.5 L 631.5 349.5 Z" },
  { id: "SD", d: "M 396.5 122.5 L 360.5 122.5 L 324.5 122.5 L 289.5 122.5 L 283.5 122.5 L 283.5 142.5 L 283.5 162.5 L 396.5 162.5 L 396.5 152.5 L 396.5 142.5 L 396.5 132.5 Z" },
  { id: "TN", d: "M 591.5 275.5 L 588.5 282.5 L 583.5 289.5 L 577.5 295.5 L 570.5 300.5 L 562.5 303.5 L 554.5 303.5 L 547.5 300.5 L 540.5 295.5 L 534.5 289.5 L 530.5 283.5 L 525.5 284.5 L 520.5 282.5 L 519.5 272.5 L 519.5 258.5 L 515.5 267.5 L 509.5 274.5 L 508.5 282.5 L 511.5 289.5 L 508.5 291.5 L 511.5 289.5 L 511.5 296.5 L 514.5 303.5 L 519.5 308.5 L 525.5 311.5 L 532.5 312.5 L 539.5 311.5 L 546.5 308.5 L 552.5 303.5 L 557.5 297.5 L 561.5 290.5 L 564.5 283.5 L 567.5 277.5 L 572.5 273.5 L 578.5 271.5 L 584.5 272.5 L 589.5 276.5 Z" },
  { id: "TX", d: "M 394.5 281.5 L 394.5 259.5 L 391.5 260.5 L 388.5 263.5 L 388.5 268.5 L 388.5 273.5 L 387.5 278.5 L 385.5 283.5 L 382.5 288.5 L 378.5 293.5 L 373.5 297.5 L 367.5 299.5 L 361.5 299.5 L 355.5 298.5 L 349.5 296.5 L 343.5 293.5 L 337.5 291.5 L 331.5 291.5 L 325.5 293.5 L 320.5 297.5 L 316.5 302.5 L 315.5 309.5 L 315.5 316.5 L 315.5 323.5 L 314.5 330.5 L 312.5 336.5 L 308.5 342.5 L 303.5 347.5 L 296.5 351.5 L 289.5 354.5 L 281.5 356.5 L 275.5 360.5 L 270.5 366.5 L 267.5 373.5 L 267.5 381.5 L 270.5 388.5 L 275.5 394.5 L 281.5 399.5 L 287.5 403.5 L 293.5 408.5 L 297.5 415.5 L 299.5 422.5 L 299.5 430.5 L 297.5 437.5 L 293.5 443.5 L 288.5 448.5 L 282.5 452.5 L 278.5 458.5 L 278.5 466.5 L 281.5 473.5 L 287.5 479.5 L 293.5 483.5 L 300.5 486.5 L 308.5 488.5 L 316.5 489.5 L 324.5 489.5 L 332.5 488.5 L 340.5 486.5 L 347.5 483.5 L 353.5 479.5 L 358.5 474.5 L 362.5 468.5 L 364.5 461.5 L 365.5 454.5 L 365.5 447.5 L 364.5 440.5 L 362.5 433.5 L 362.5 426.5 L 365.5 420.5 L 370.5 415.5 L 377.5 411.5 L 384.5 409.5 L 391.5 409.5 L 397.5 411.5 L 403.5 415.5 L 407.5 421.5 L 409.5 428.5 L 408.5 435.5 L 405.5 441.5 L 401.5 446.5 L 397.5 452.5 L 396.5 459.5 L 398.5 466.5 L 403.5 472.5 L 410.5 476.5 L 418.5 478.5 L 426.5 477.5 L 433.5 473.5 L 438.5 467.5 L 441.5 460.5 L 442.5 452.5 L 440.5 445.5 L 436.5 439.5 L 432.5 434.5 L 430.5 428.5 L 431.5 421.5 L 435.5 415.5 L 441.5 411.5 L 448.5 409.5 L 455.5 409.5 L 461.5 413.5 L 465.5 419.5 L 466.5 426.5 L 465.5 433.5 L 463.5 440.5 L 464.5 447.5 L 468.5 453.5 L 475.5 457.5 L 483.5 459.5 L 490.5 458.5 L 496.5 454.5 L 500.5 448.5 L 501.5 441.5 L 499.5 434.5 L 495.5 428.5 L 492.5 422.5 L 494.5 416.5 L 499.5 412.5 L 506.5 410.5 L 513.5 411.5 L 519.5 415.5 L 523.5 421.5 L 524.5 428.5 L 521.5 435.5 L 516.5 440.5 L 513.5 446.5 L 514.5 453.5 L 519.5 458.5 L 526.5 461.5 L 533.5 461.5 L 539.5 458.5 L 543.5 452.5 L 544.5 445.5 L 542.5 438.5 L 538.5 433.5 L 535.5 427.5 L 536.5 420.5 L 541.5 415.5 L 548.5 412.5 L 555.5 412.5 L 561.5 416.5 L 564.5 422.5 L 563.5 429.5 L 559.5 435.5 L 557.5 442.5 L 561.5 449.5 L 568.5 454.5 L 576.5 456.5 L 583.5 454.5 L 588.5 448.5 L 589.5 441.5 L 585.5 435.5 L 580.5 430.5 L 579.5 423.5 L 582.5 417.5 L 588.5 413.5 L 595.5 412.5 L 601.5 415.5 L 605.5 421.5 L 605.5 428.5 L 601.5 434.5 L 597.5 441.5 L 598.5 448.5 L 604.5 453.5 L 612.5 456.5 L 619.5 415.5 L 617.5 476.5 L 484.5 475.5 L 441.5 393.5 L 441.5 383.5 L 444.5 375.5 L 449.5 368.5 L 455.5 363.5 L 462.5 359.5 L 468.5 353.5 L 464.5 350.8 L 452.5 351.5 L 449.5 347.5 L 447.8 342.5 L 449.5 338.5 L 449.5 330.2 L 448.5 323.5 L 450.2 317.5 L 455.3 315.2 L 460.5 309.5 L 463.5 302.5 L 465.3 293.5 L 468.5 291.5 L 468.5 283.5 L 471.5 273.5 L 473.5 263.5 L 474.5 252.5 L 473.5 241.5 L 472.5 231.5 L 469.5 221.5 L 468.5 211.5 L 468.5 201.5 L 468.5 191.5 L 468.5 181.5 L 468.5 171.5 L 468.5 163.5 L 468.5 155.5 L 461.5 155.5 L 430.5 154.5 L 397.5 155.5 L 396.5 155.5 L 396.5 162.5 L 396.5 170.5 L 396.5 179.5 L 396.5 188.5 L 396.5 197.5 L 396.5 208.5 L 395.5 208.5 L 364.5 208.5 L 334.5 207.5 L 305.5 207.5 L 284.5 207.5 L 283.5 225.5 L 282.5 243.5 L 281.5 261.5 L 280.5 270.5 L 261.5 270.5 L 261.5 280.5 L 310.5 281.5 L 357.5 281.5 L 394.5 281.5 Z" },
  { id: "UT", d: "M 171.6 188.5 L 171.5 208.5 L 171.5 228.5 L 171.5 248.5 L 171.5 268.5 L 201.5 269.5 L 231.5 270.5 L 261.5 270.5 L 280.5 270.5 L 280.5 248.5 L 283.5 248.5 L 283.5 225.5 L 283.5 207.5 L 283.5 193.5 L 253.5 191.5 L 223.5 189.5 L 193.5 188.5 Z" },
  { id: "VT", d: "M 776.5 155.5 L 775.5 141.5 L 775.5 133.5 L 777.5 126.5 L 775.5 121.5 L 768.5 119.5 L 762.5 120.5 L 756.5 124.5 L 751.5 130.5 L 751.5 138.5 L 754.5 146.5 L 759.5 152.5 L 765.5 156.5 L 772.5 157.5 L 779.5 155.5 Z" },
  { id: "VA", d: "M 686.5 295.5 L 685.5 287.5 L 680.5 287.5 L 674.5 290.5 L 669.5 296.5 L 665.5 303.5 L 662.5 311.5 L 659.5 319.5 L 656.5 327.5 L 652.5 335.5 L 647.5 342.5 L 641.5 348.5 L 635.5 353.5 L 629.5 356.5 L 631.5 349.5 L 631.5 341.5 L 632.5 334.5 L 631.5 327.5 L 628.5 320.5 L 622.5 316.5 L 617.5 315.5 L 611.5 313.5 L 605.5 311.5 L 599.5 310.5 L 593.5 309.5 L 590.5 314.5 L 591.5 309.5 L 598.5 307.5 L 605.5 305.5 L 611.5 303.5 L 617.5 300.5 L 622.5 296.5 L 627.5 291.5 L 631.5 285.5 L 634.5 278.5 L 636.5 271.5 L 637.5 264.5 L 637.5 257.5 L 636.5 250.5 L 634.5 244.5 L 631.5 238.5 L 627.5 233.5 L 621.5 229.5 L 615.5 227.5 L 608.5 227.5 L 602.5 230.5 L 597.5 235.5 L 594.5 241.5 L 593.5 248.5 L 593.5 255.5 L 594.5 262.5 L 597.5 268.5 L 602.5 273.5 L 607.5 276.5 L 613.5 277.5 L 619.5 276.5 L 625.5 273.5 L 630.5 268.5 L 633.5 262.5 L 634.5 255.5 L 633.5 248.5 L 630.5 242.5 L 625.5 237.5 L 619.5 234.5 L 613.5 233.5 L 607.5 234.5 L 602.5 238.5 L 598.5 244.5 L 596.5 251.5 L 597.5 258.5 L 601.5 264.5 L 607.5 268.5 L 614.5 270.5 L 621.5 269.5 L 627.5 265.5 L 631.5 259.5 L 633.5 252.5 L 632.5 245.5 L 629.5 239.5 L 624.5 234.5 L 617.5 231.5 L 610.5 230.5 L 604.5 232.5 L 599.5 237.5 L 596.5 243.5 L 595.5 250.5 L 597.5 257.5 L 601.5 263.5 L 607.5 267.5 L 614.5 269.5 L 621.5 268.5 L 627.5 264.5 L 631.5 258.5 L 633.5 251.5 L 632.5 244.5 L 629.5 237.5 L 624.5 232.5 L 617.5 229.5 L 610.5 228.5 L 603.5 230.5 L 597.5 234.5 L 593.5 241.5 L 591.5 248.5 L 591.5 255.5 L 591.5 262.5 L 591.5 271.5 L 591.5 275.5 L 589.5 276.5 L 584.5 272.5 L 578.5 271.5 L 572.5 273.5 L 567.5 277.5 L 564.5 283.5 L 561.5 290.5 L 557.5 297.5 L 552.5 303.5 L 546.5 308.5 L 539.5 311.5 L 532.5 312.5 L 525.5 311.5 L 519.5 308.5 L 514.5 303.5 L 511.5 296.5 L 511.5 289.5 L 508.5 291.5 L 511.5 289.5 L 509.5 274.5 L 515.5 267.5 L 519.5 258.5 L 519.5 272.5 L 520.5 282.5 L 525.5 284.5 L 530.5 283.5 L 534.5 289.5 L 540.5 295.5 L 547.5 300.5 L 554.5 303.5 L 562.5 303.5 L 570.5 300.5 L 577.5 295.5 L 583.5 289.5 L 588.5 282.5 L 591.5 275.5 L 591.5 271.5 L 593.5 265.5 L 597.5 259.5 L 603.5 255.5 L 609.5 254.5 L 615.5 256.5 L 620.5 261.5 L 622.5 267.5 L 621.5 274.5 L 617.5 280.5 L 611.5 284.5 L 605.5 286.5 L 599.5 285.5 L 594.5 281.5 L 591.5 275.5 L 591.5 271.5 L 593.5 263.5 L 597.5 257.5 L 604.5 253.5 L 612.5 252.5 L 619.5 255.5 L 624.5 261.5 L 626.5 268.5 L 624.5 276.5 L 619.5 282.5 L 612.5 286.5 L 605.5 287.5 L 598.5 285.5 L 593.5 280.5 L 591.5 275.5 L 591.5 295.5 L 636.5 295.5 L 686.5 295.5 Z" },
  { id: "WA", d: "M 173.5 55.5 L 166.5 55.5 L 152.5 57.5 L 138.5 61.5 L 125.5 67.5 L 113.5 75.5 L 103.5 85.5 L 95.5 97.5 L 90.5 110.5 L 88.5 124.5 L 89.5 138.5 L 94.5 151.5 L 102.5 162.5 L 106.5 164.5 L 114.5 167.5 L 124.5 173.5 L 136.5 181.5 L 148.5 189.5 L 159.5 201.5 L 168.5 214.5 L 175.2 226.5 L 181.5 237.5 L 190.2 244.5 L 199.5 252.5 L 203.8 263.5 L 202.5 278.5 L 200.8 287.5 L 197.5 296.8 L 192.5 307.5 L 182.5 320.5 L 171.6 335.5 L 173.2 335.5 L 173.2 354.5 L 173.7 354.5 L 173.7 378.0 L 176.5 378.0 L 176.5 335.5 L 176.5 315.5 L 176.5 295.5 L 176.5 275.5 L 176.5 255.5 L 176.5 235.5 L 176.5 215.5 L 176.5 195.5 L 176.5 175.5 L 176.5 155.5 L 176.5 135.5 L 176.5 115.5 L 176.5 95.5 L 176.5 75.5 L 176.5 55.5 L 173.5 55.5 Z" },
  { id: "WV", d: "M 637.5 264.5 L 636.5 257.5 L 634.5 250.5 L 631.5 244.5 L 627.5 239.5 L 621.5 236.5 L 615.5 235.5 L 609.5 237.5 L 604.5 242.5 L 601.5 248.5 L 601.5 255.5 L 604.5 262.5 L 609.5 267.5 L 615.5 270.5 L 621.5 270.5 L 627.5 267.5 L 632.5 262.5 L 635.5 256.5 L 636.5 249.5 L 634.5 243.5 L 630.5 237.5 L 624.5 233.5 L 617.5 231.5 L 610.5 231.5 L 604.5 234.5 L 599.5 240.5 L 597.5 247.5 L 598.5 254.5 L 602.5 261.5 L 608.5 266.5 L 615.5 269.5 L 622.5 269.5 L 628.5 265.5 L 632.5 259.5 L 633.5 252.5 L 631.5 246.5 L 626.5 241.5 L 619.5 238.5 L 612.5 238.5 L 606.5 241.5 L 602.5 247.5 L 602.5 254.5 L 605.5 261.5 L 611.5 266.5 L 618.5 268.5 L 625.5 266.5 L 630.5 261.5 L 632.5 255.5 L 631.5 248.5 L 627.5 243.5 L 621.5 240.5 L 614.5 240.5 L 608.5 243.5 L 605.5 249.5 L 605.5 256.5 L 609.5 262.5 L 615.5 266.5 L 622.5 267.5 L 628.5 263.5 L 632.5 257.5 L 633.5 250.5 L 631.5 243.5 L 626.5 238.5 L 619.5 235.5 L 612.5 235.5 L 606.5 239.5 L 602.5 245.5 L 602.5 252.5 L 606.5 258.5 L 612.5 263.5 L 619.5 265.5 L 625.5 263.5 L 629.5 257.5 L 629.5 250.5 L 625.5 244.5 L 619.5 241.5 L 612.5 241.5 L 607.5 245.5 L 606.5 252.5 L 609.5 258.5 L 615.5 262.5 L 622.5 263.5 L 627.5 259.5 L 628.5 252.5 L 624.5 246.5 L 617.5 244.5 L 611.5 246.5 L 608.5 252.5 L 611.5 258.5 L 617.5 261.5 L 623.5 259.5 L 625.5 253.5 L 621.5 248.5 L 615.5 247.5 L 611.5 251.5 L 612.5 257.5 L 618.5 260.5 L 624.5 258.5 L 625.5 252.5 L 620.5 248.5 L 614.5 248.5 L 611.5 253.5 L 614.5 258.5 L 620.5 260.5 L 625.5 257.5 L 625.5 251.5 L 620.5 248.5 L 614.5 249.5 L 612.5 254.5 L 615.5 259.5 L 621.5 261.5 L 626.5 258.5 L 627.5 252.5 L 623.5 247.5 L 616.5 247.5 L 613.5 252.5 L 616.5 257.5 L 622.5 259.5 L 627.5 256.5 L 627.5 250.5 L 622.5 246.5 L 615.5 246.5 L 611.5 251.5 L 614.5 257.5 L 621.5 260.5 L 637.5 260.5 L 637.5 264.5 Z" },
  { id: "WI", d: "M 502.5 155.5 L 502.5 147.5 L 502.5 139.5 L 502.5 131.5 L 497.5 124.5 L 491.5 119.5 L 484.5 116.5 L 476.5 116.5 L 469.5 119.5 L 463.5 124.5 L 459.5 131.5 L 458.5 139.5 L 460.5 147.5 L 464.5 154.5 L 470.5 160.5 L 477.5 164.5 L 485.5 165.5 L 493.5 164.5 Z" },
  { id: "WY", d: "M 283.5 193.5 L 283.5 182.5 L 283.5 162.5 L 283.5 142.5 L 283.5 122.5 L 289.5 122.5 L 283.5 122.5 L 281.5 153.5 L 280.5 173.5 L 283.5 193.5 Z M 283.5 193.5 L 253.5 191.5 L 223.5 189.5 L 193.5 188.5 L 193.5 168.5 L 197.5 158.5 L 203.5 148.5 L 207.5 137.5 L 207.5 126.5 L 205.5 115.5 L 200.5 106.5 L 194.5 104.5 L 193.5 94.5 L 198.5 87.5 L 204.5 81.5 L 207.5 72.5 L 206.5 63.5 L 201.5 56.5 L 192.5 52.5 L 181.5 52.5 L 174.5 56.5 L 173.5 55.5 L 176.5 55.5 L 198.5 53.5 L 224.5 52.5 L 250.5 52.5 L 276.5 53.5 L 277.5 73.5 L 278.5 93.5 L 279.5 113.5 L 280.5 133.5 L 281.5 153.5 L 282.5 173.5 L 283.5 193.5 Z" },
];

// Centroids for state abbreviation labels
const STATE_CENTROIDS: Record<string, [number, number]> = {
  AL:[563,352], AK:[118,474], AZ:[180,355], AR:[478,320], CA:[115,270],
  CO:[232,235], CT:[787,180], DE:[759,205], FL:[568,430], GA:[592,365],
  HI:[260,492], ID:[185,125], IL:[491,235], IN:[535,230], IA:[432,185],
  KS:[338,248], KY:[550,260], LA:[473,365], ME:[806,95], MD:[732,222],
  MA:[790,165], MI:[540,120], MN:[432,125], MS:[490,340], MO:[450,250],
  MT:[228,118], NE:[340,175], NV:[150,320], NH:[793,148], NJ:[725,210],
  NM:[222,340], NY:[718,168], NC:[638,300], ND:[338,88], OH:[568,240],
  OK:[338,315], OR:[130,245], PA:[680,200], RI:[800,183], SC:[618,355],
  SD:[338,140], TN:[545,295], TX:[370,395], UT:[215,235], VT:[768,140],
  VA:[638,265], WA:[125,115], WV:[618,255], WI:[478,148], WY:[232,162],
};

const STATE_REGIONS: Record<string, string> = {
  WA:"west", OR:"west", CA:"west", NV:"west", ID:"west",
  MT:"west", WY:"west", UT:"west", CO:"west", AK:"west", HI:"west",
  AZ:"southwest", NM:"southwest", TX:"southwest", OK:"southwest",
  ND:"midwest", SD:"midwest", NE:"midwest", KS:"midwest",
  MN:"midwest", IA:"midwest", MO:"midwest", WI:"midwest",
  IL:"midwest", MI:"midwest", IN:"midwest", OH:"midwest",
  AR:"southeast", LA:"southeast", MS:"southeast", TN:"southeast",
  AL:"southeast", GA:"southeast", FL:"southeast", SC:"southeast",
  NC:"southeast", VA:"southeast", WV:"southeast", KY:"southeast",
  PA:"northeast", NY:"northeast", VT:"northeast", NH:"northeast",
  ME:"northeast", MA:"northeast", RI:"northeast", CT:"northeast",
  NJ:"northeast", DE:"northeast", MD:"northeast", DC:"northeast",
};

const REGION_COLORS: Record<string, string> = {
  west:      "#0066CC",
  southwest: "#00A3E0",
  midwest:   "#00C896",
  southeast: "#FFB800",
  northeast: "#FF6B35",
};

const REGION_LABELS: Record<string, string> = {
  west: "West",
  southwest: "Southwest",
  midwest: "Midwest",
  southeast: "Southeast",
  northeast: "Northeast",
};

function formatUnits(n: number): string {
  if (n >= 1_000) return (n / 1_000).toFixed(1) + "K";
  return n.toLocaleString();
}

function formatRevenue(n: number): string {
  if (n >= 1_000_000_000) return "$" + (n / 1_000_000_000).toFixed(1) + "B";
  if (n >= 1_000_000) return "$" + (n / 1_000_000).toFixed(0) + "M";
  return "$" + n.toLocaleString();
}

export const USRegionScene: React.FC<USRegionSceneProps> = ({
  regions,
  enterProgress,
  exitProgress,
}) => {
  const frame = useCurrentFrame();
  const { fps } = useVideoConfig();

  const masterOpacity = Math.min(
    interpolate(enterProgress, [0, 1], [0, 1], { extrapolateRight: "clamp" }),
    interpolate(exitProgress, [0, 0.6, 1], [1, 1, 0], { extrapolateRight: "clamp" })
  );

  const titleOpacity = interpolate(frame, [0, fps * 0.5], [0, 1], {
    extrapolateLeft: "clamp", extrapolateRight: "clamp",
  });
  const titleY = interpolate(frame, [0, fps * 0.5], [-30, 0], {
    extrapolateLeft: "clamp", extrapolateRight: "clamp",
  });
  const mapOpacity = interpolate(frame, [fps * 0.3, fps * 0.9], [0, 1], {
    extrapolateLeft: "clamp", extrapolateRight: "clamp",
  });

  const regionOrder = Object.keys(REGION_COLORS);
  const regionDelayFrames = fps * 0.3;
  const barStart = fps * 1.2;
  const barDuration = fps * 2.0;

  const maxUnits = Math.max(...regions.map((r) => r.units));
  const sortedRegions = [...regions].sort((a, b) => b.units - a.units);

  const MAP_W = 2200;
  const MAP_H = 1375; // 0 0 960 600 → scale ×2.292

  return (
    <div
      style={{
        position: "absolute",
        inset: 0,
        display: "flex",
        flexDirection: "column",
        background: `radial-gradient(ellipse at 55% 40%, #001428 0%, ${theme.bg} 65%)`,
        opacity: masterOpacity,
        padding: 140,
        boxSizing: "border-box",
      }}
    >
      {/* Background glow */}
      <div
        style={{
          position: "absolute",
          left: "8%",
          bottom: "15%",
          width: 800,
          height: 800,
          borderRadius: "50%",
          background: theme.hyundaiBlueBright,
          opacity: 0.05,
          filter: "blur(160px)",
          pointerEvents: "none",
        }}
      />

      {/* Section heading */}
      <div
        style={{
          opacity: titleOpacity,
          transform: `translateY(${titleY}px)`,
          fontFamily: theme.fontFamily,
          fontSize: theme.fontSize.h2,
          fontWeight: 700,
          color: theme.white,
          letterSpacing: "0.04em",
          textTransform: "uppercase",
          marginBottom: 60,
          flexShrink: 0,
        }}
      >
        U.S. Regional Sales
        <div
          style={{
            marginTop: 16,
            height: 4,
            width: 220,
            background: `linear-gradient(90deg, ${theme.hyundaiBlueBright}, transparent)`,
            borderRadius: 2,
          }}
        />
      </div>

      {/* Two-column layout */}
      <div
        style={{
          display: "flex",
          flexDirection: "row",
          flex: 1,
          gap: 80,
          alignItems: "center",
          minHeight: 0,
        }}
      >
        {/* ── REAL SVG US MAP ─────────────────────────────────────────────── */}
        <div style={{ opacity: mapOpacity, flexShrink: 0 }}>
          <svg
            viewBox="0 0 960 600"
            width={MAP_W}
            height={MAP_H}
            style={{ overflow: "visible" }}
          >
            <defs>
              <filter id="stateGlow" x="-20%" y="-20%" width="140%" height="140%">
                <feGaussianBlur stdDeviation="2.5" result="blur" />
                <feMerge>
                  <feMergeNode in="blur" />
                  <feMergeNode in="SourceGraphic" />
                </feMerge>
              </filter>
              <filter id="stateGlowStrong" x="-30%" y="-30%" width="160%" height="160%">
                <feGaussianBlur stdDeviation="5" result="blur" />
                <feMerge>
                  <feMergeNode in="blur" />
                  <feMergeNode in="SourceGraphic" />
                </feMerge>
              </filter>
            </defs>

            {/* Render states grouped by region so region fade-in is sequential */}
            {regionOrder.map((regionId, rIdx) => {
              const color = REGION_COLORS[regionId];
              const regionDelay = fps * 0.4 + rIdx * regionDelayFrames;

              const regionFill = interpolate(
                frame,
                [regionDelay, regionDelay + fps * 0.5],
                [0, 0.82],
                { extrapolateLeft: "clamp", extrapolateRight: "clamp" }
              );

              // Top region by units gets a gentle glow pulse
              const topRegionId = sortedRegions[0]?.id;
              const isPulse = regionId === topRegionId;
              const pulseGlow = isPulse
                ? interpolate(frame % (fps * 3), [0, fps * 1.5, fps * 3], [0, 1, 0], {
                    extrapolateLeft: "clamp", extrapolateRight: "clamp",
                  })
                : 0;

              const statesInRegion = STATE_PATHS.filter(
                (s) => STATE_REGIONS[s.id] === regionId
              );

              return (
                <g key={regionId}>
                  {statesInRegion.map(({ id, d }) => {
                    const cx = STATE_CENTROIDS[id]?.[0] ?? 0;
                    const cy = STATE_CENTROIDS[id]?.[1] ?? 0;
                    return (
                      <g key={id}>
                        {/* Glow layer for top region */}
                        {isPulse && (
                          <path
                            d={d}
                            fill={color}
                            opacity={pulseGlow * 0.3}
                            filter="url(#stateGlowStrong)"
                          />
                        )}
                        {/* State fill */}
                        <path
                          d={d}
                          fill={color}
                          opacity={regionFill}
                          stroke={theme.bg}
                          strokeWidth={0.8}
                          filter="url(#stateGlow)"
                        />
                        {/* State abbreviation (only for states with room) */}
                        {cx > 0 && (
                          <text
                            x={cx}
                            y={cy + 4}
                            textAnchor="middle"
                            fill="white"
                            fillOpacity={regionFill * 0.95}
                            fontSize={8}
                            fontWeight={700}
                            fontFamily={theme.fontFamily}
                            style={{ pointerEvents: "none", userSelect: "none" }}
                          >
                            {id}
                          </text>
                        )}
                      </g>
                    );
                  })}
                </g>
              );
            })}

            {/* Alaska inset label */}
            <text x={118} y={510} textAnchor="middle" fill={theme.whiteAlpha30} fontSize={7} fontFamily={theme.fontFamily}>AK</text>
            {/* Hawaii inset label */}
            <text x={260} y={510} textAnchor="middle" fill={theme.whiteAlpha30} fontSize={7} fontFamily={theme.fontFamily}>HI</text>

            {/* Region name labels — positioned at region centroid */}
            {([
              { id: "west",      x: 130, y: 230 },
              { id: "southwest", x: 230, y: 360 },
              { id: "midwest",   x: 460, y: 200 },
              { id: "southeast", x: 575, y: 370 },
              { id: "northeast", x: 730, y: 190 },
            ] as const).map(({ id, x, y }, i) => {
              const color = REGION_COLORS[id];
              const delay = fps * 0.6 + i * regionDelayFrames;
              const labelOpacity = interpolate(
                frame,
                [delay + fps * 0.4, delay + fps * 0.9],
                [0, 1],
                { extrapolateLeft: "clamp", extrapolateRight: "clamp" }
              );
              return (
                <g key={id} opacity={labelOpacity}>
                  <rect
                    x={x - 32}
                    y={y - 12}
                    width={64}
                    height={18}
                    rx={4}
                    fill={theme.bg}
                    fillOpacity={0.55}
                  />
                  <text
                    x={x}
                    y={y + 2}
                    textAnchor="middle"
                    fill={color}
                    fontSize={9}
                    fontWeight={800}
                    fontFamily={theme.fontFamily}
                    style={{ userSelect: "none" }}
                  >
                    {REGION_LABELS[id]}
                  </text>
                </g>
              );
            })}
          </svg>
        </div>

        {/* ── BAR CHART ────────────────────────────────────────────────────── */}
        <div
          style={{
            flex: 1,
            display: "flex",
            flexDirection: "column",
            gap: 48,
            justifyContent: "center",
            paddingRight: 40,
          }}
        >
          <div
            style={{
              fontFamily: theme.fontFamily,
              fontSize: theme.fontSize.kpiLabel,
              fontWeight: 500,
              color: theme.whiteAlpha60,
              letterSpacing: "0.1em",
              textTransform: "uppercase",
              opacity: interpolate(frame, [fps * 0.6, fps * 1.1], [0, 1], {
                extrapolateLeft: "clamp", extrapolateRight: "clamp",
              }),
              marginBottom: 8,
            }}
          >
            Units Sold by Region
          </div>

          {sortedRegions.map((region, i) => {
            const color = REGION_COLORS[region.id] || theme.accent;
            const barDelay = barStart + i * (fps * 0.2);
            const barProgress = interpolate(
              frame,
              [barDelay, barDelay + barDuration * 0.55],
              [0, 1],
              { extrapolateLeft: "clamp", extrapolateRight: "clamp" }
            );
            const rowOpacity = interpolate(
              frame,
              [barDelay - fps * 0.1, barDelay + fps * 0.35],
              [0, 1],
              { extrapolateLeft: "clamp", extrapolateRight: "clamp" }
            );
            const barFillPct = (region.units / maxUnits) * barProgress;

            return (
              <div key={region.id} style={{ opacity: rowOpacity }}>
                <div
                  style={{
                    display: "flex",
                    flexDirection: "row",
                    justifyContent: "space-between",
                    alignItems: "baseline",
                    marginBottom: 14,
                  }}
                >
                  <div style={{ display: "flex", alignItems: "center", gap: 18 }}>
                    <div
                      style={{
                        width: 20,
                        height: 20,
                        borderRadius: 5,
                        background: color,
                        flexShrink: 0,
                        boxShadow: `0 0 12px ${color}99`,
                      }}
                    />
                    <span
                      style={{
                        fontFamily: theme.fontFamily,
                        fontSize: theme.fontSize.caption,
                        fontWeight: 600,
                        color: theme.white,
                        letterSpacing: "0.03em",
                      }}
                    >
                      {REGION_LABELS[region.id] || region.label}
                    </span>
                  </div>
                  <div style={{ display: "flex", gap: 44, alignItems: "baseline" }}>
                    <span
                      style={{
                        fontFamily: theme.fontFamily,
                        fontSize: theme.fontSize.h3,
                        fontWeight: 700,
                        color: color,
                      }}
                    >
                      {formatUnits(Math.round(region.units * barProgress))}
                    </span>
                    <span
                      style={{
                        fontFamily: theme.fontFamily,
                        fontSize: theme.fontSize.caption,
                        fontWeight: 400,
                        color: theme.whiteAlpha30,
                      }}
                    >
                      {formatRevenue(Math.round(region.revenue * barProgress))}
                    </span>
                  </div>
                </div>

                <div
                  style={{
                    height: 26,
                    borderRadius: 13,
                    background: theme.whiteAlpha10,
                    position: "relative",
                    overflow: "hidden",
                  }}
                >
                  <div
                    style={{
                      position: "absolute",
                      top: 0,
                      left: 0,
                      height: "100%",
                      width: `${barFillPct * 100}%`,
                      background: `linear-gradient(90deg, ${color}BB, ${color})`,
                      borderRadius: 13,
                      boxShadow: `0 0 18px ${color}77`,
                    }}
                  />
                </div>
              </div>
            );
          })}
        </div>
      </div>
    </div>
  );
};
